{"id":"lY9v","dependencies":[{"name":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/.babelrc","includedInParent":true,"mtime":1644697412893},{"name":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/package.json","includedInParent":true,"mtime":1644697412902},{"name":"react","loc":{"line":1,"column":43},"parent":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/src/App.js","resolved":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/node_modules/react/index.js"},{"name":"@mui/material","loc":{"line":3,"column":50},"parent":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/src/App.js","resolved":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/node_modules/@mui/material/index.js"},{"name":"./components","loc":{"line":5,"column":24},"parent":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/src/App.js","resolved":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/src/components/index.js"},{"name":"./lib/api.js","loc":{"line":7,"column":62},"parent":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/src/App.js","resolved":"/Users/clusk/Documents/OtherRepositories/StrikeElectric/src/lib/api.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=d;var e=i(require(\"react\")),t=require(\"@mui/material\"),n=require(\"./components\"),r=require(\"./lib/api.js\");function a(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(\"default\"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}const u=\"https://api.next.strike.me/v1/\",l=\"default\",o=\"none\",c=e=>e.currencies.find(e=>e.isDefaultCurrency).currency,s=async(e,t,n)=>await r.api.createInvoice(e,t,n),f=async e=>await r.api.createQuote(e),p=async e=>await r.api.getInvoice(e);function d(a){let{apikey:i,handle:o,amount:d=1,theme:v=l}=a;r.api.init(u,i);const[y,m]=(0,e.useState)(null),[w,E]=(0,e.useState)(null),[I,O]=(0,e.useState)(null),[T,P]=(0,e.useState)(!1),[h,g]=e.default.useState(null);(0,e.useEffect)(async()=>{var e=await r.api.getProfile(o);m(e)},[]),(0,e.useEffect)(()=>{if(null===I)return;var e;const t=setTimeout(async()=>{const t=await p(w.invoiceId);E(t),t.state!==r.INVOICE_STATE_UNPAID&&(O(null),e=setTimeout(()=>{E(null)},3e3)),new Date(I.expiration)<new Date&&O(null)},1e3);return()=>{clearTimeout(t),clearTimeout(e)}},[w,I]);const _=(null==w?void 0:w.state)===r.INVOICE_STATE_UNPAID&&null!==I,b=(null==w?void 0:w.state)===r.INVOICE_STATE_PAID;return y?e.default.createElement(\"div\",null,e.default.createElement(t.Button,{variant:\"contained\",onClick:e=>(async(e,t)=>{g(e.currentTarget),P(!0);var n=w;n||(n=await s(o,t,y.currencies.find(e=>e.isDefaultCurrency).currency),E(n));const r=await f(n.invoiceId);O(r),P(!1)})(e,d),fullWidth:!0},T&&e.default.createElement(t.CircularProgress,{size:24}),b?\"Thank You!\":`Tip ${o} ${d} ${c(y)}`),e.default.createElement(t.Popover,{open:_,anchorEl:h,onClose:()=>{O(null),g(null)},anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"center\"}},_&&e.default.createElement(n.Invoice,{quote:I,size:250,m:2}))):null}"},"sourceMaps":null,"error":null,"hash":"4d28f5fba184bfc3121456c060584b5a","cacheData":{"env":{}}}