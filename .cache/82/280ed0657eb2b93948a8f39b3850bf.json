{"id":"lY9v","dependencies":[{"name":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/.babelrc","includedInParent":true,"mtime":1644697412893},{"name":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/package.json","includedInParent":true,"mtime":1644697412902},{"name":"react","loc":{"line":1,"column":43},"parent":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/src/App.js","resolved":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/node_modules/react/index.js"},{"name":"qrcode.react","loc":{"line":2,"column":19},"parent":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/src/App.js","resolved":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/node_modules/qrcode.react/lib/index.js"},{"name":"@mui/material","loc":{"line":3,"column":67},"parent":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/src/App.js","resolved":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/node_modules/@mui/material/index.js"},{"name":"./components","loc":{"line":4,"column":24},"parent":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/src/App.js","resolved":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/src/components/index.js"},{"name":"./lib/api.js","loc":{"line":6,"column":62},"parent":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/src/App.js","resolved":"/Users/clusk/Documents/OtherRepositories/strike-tipping-widget/src/lib/api.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=y;var e=l(require(\"react\")),t=u(require(\"qrcode.react\")),r=require(\"@mui/material\"),n=require(\"./components\"),a=require(\"./lib/api.js\");function u(e){return e&&e.__esModule?e:{default:e}}function i(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(\"default\"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}const o=\"https://api.strike.me/v1\",c=\"default\",s=\"none\",f=e=>e.currencies.find(e=>e.isDefaultCurrency).currency,p=async(e,t,r)=>await a.api.createInvoice(e,t,r),d=async e=>await a.api.createQuote(e),v=async e=>await a.api.getInvoice(e);function y(t){let{apikey:u,handle:i,amount:l=1,theme:s=c}=t;a.api.init(o,u);const[y,m]=(0,e.useState)(null),[w,E]=(0,e.useState)(null),[I,O]=(0,e.useState)(null),[T,P]=(0,e.useState)(!1),[_,h]=e.default.useState(null);(0,e.useEffect)(async()=>{var e=await a.api.getProfile(i);m(e)},[]),(0,e.useEffect)(()=>{if(null===I)return;var e;const t=setTimeout(async()=>{const t=await v(w.invoiceId);E(t),t.state!==a.INVOICE_STATE_UNPAID&&(O(null),e=setTimeout(()=>{E(null)},3e3)),new Date(I.expiration)<new Date&&O(null)},1e3);return()=>{clearTimeout(t),clearTimeout(e)}},[w,I]);const g=(null==w?void 0:w.state)===a.INVOICE_STATE_UNPAID&&null!==I,b=(null==w?void 0:w.state)===a.INVOICE_STATE_PAID;return y?e.default.createElement(\"div\",null,e.default.createElement(r.Button,{variant:\"contained\",onClick:e=>(async(e,t)=>{h(e.currentTarget),P(!0);var r=w;r||(r=await p(i,t,y.currencies.find(e=>e.isDefaultCurrency).currency),E(r));const n=await d(r.invoiceId);O(n),P(!1)})(e,l),fullWidth:!0},T&&e.default.createElement(r.CircularProgress,{size:24}),b?\"Thank You!\":`Tip ${i} ${l} ${f(y)}`),e.default.createElement(r.Popover,{open:g,anchorEl:_,onClose:()=>{O(null),h(null)},anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"center\"}},g&&e.default.createElement(n.Invoice,{quote:I,size:250,m:2}))):null}"},"sourceMaps":null,"error":null,"hash":"95bd2bda7697179549f5d57f7ed92628","cacheData":{"env":{}}}