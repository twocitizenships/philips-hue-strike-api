{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HueRateLimiter = void 0;\n\nconst bottleneck_1 = __importDefault(require(\"bottleneck\"));\n\nconst HueApiRateLimitLogger_1 = require(\"./HueApiRateLimitLogger\");\n\nclass HueRateLimiter {\n  constructor(bridgeName, name, rateLimit) {\n    this.id = 0;\n    this.limiterName = `${bridgeName.trim().length > 0 ? bridgeName : 'node-hue-api'}:${name}`;\n    this.bottleneck = new bottleneck_1.default(rateLimit || undefined);\n    HueApiRateLimitLogger_1.HueApiRateLimitLogger.install(name, this.bottleneck);\n  }\n\n  schedule(fn) {\n    const jobId = this.id++;\n    return this.bottleneck.schedule({\n      id: `${this.limiterName}:${jobId}`\n    }, fn);\n  }\n\n}\n\nexports.HueRateLimiter = HueRateLimiter;","map":{"version":3,"sources":["/Users/clusk/Documents/OtherRepositories/StrikeElectric/node_modules/node-hue-api/dist/cjs/api/HueRateLimiter.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","HueRateLimiter","bottleneck_1","require","HueApiRateLimitLogger_1","constructor","bridgeName","name","rateLimit","id","limiterName","trim","length","bottleneck","default","undefined","HueApiRateLimitLogger","install","schedule","fn","jobId"],"mappings":"AAAA;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;AACnE,SAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;AAAE,eAAWA;AAAb,GAAvC;AACH,CAFD;;AAGAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,cAAR,GAAyB,KAAK,CAA9B;;AACA,MAAMC,YAAY,GAAGR,eAAe,CAACS,OAAO,CAAC,YAAD,CAAR,CAApC;;AACA,MAAMC,uBAAuB,GAAGD,OAAO,CAAC,yBAAD,CAAvC;;AACA,MAAMF,cAAN,CAAqB;AACjBI,EAAAA,WAAW,CAACC,UAAD,EAAaC,IAAb,EAAmBC,SAAnB,EAA8B;AACrC,SAAKC,EAAL,GAAU,CAAV;AACA,SAAKC,WAAL,GAAoB,GAAEJ,UAAU,CAACK,IAAX,GAAkBC,MAAlB,GAA2B,CAA3B,GAA+BN,UAA/B,GAA4C,cAAe,IAAGC,IAAK,EAAzF;AACA,SAAKM,UAAL,GAAkB,IAAIX,YAAY,CAACY,OAAjB,CAAyBN,SAAS,IAAIO,SAAtC,CAAlB;AACAX,IAAAA,uBAAuB,CAACY,qBAAxB,CAA8CC,OAA9C,CAAsDV,IAAtD,EAA4D,KAAKM,UAAjE;AACH;;AACDK,EAAAA,QAAQ,CAACC,EAAD,EAAK;AACT,UAAMC,KAAK,GAAG,KAAKX,EAAL,EAAd;AACA,WAAO,KAAKI,UAAL,CAAgBK,QAAhB,CAAyB;AAAET,MAAAA,EAAE,EAAG,GAAE,KAAKC,WAAY,IAAGU,KAAM;AAAnC,KAAzB,EAAiED,EAAjE,CAAP;AACH;;AAVgB;;AAYrBpB,OAAO,CAACE,cAAR,GAAyBA,cAAzB","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HueRateLimiter = void 0;\nconst bottleneck_1 = __importDefault(require(\"bottleneck\"));\nconst HueApiRateLimitLogger_1 = require(\"./HueApiRateLimitLogger\");\nclass HueRateLimiter {\n    constructor(bridgeName, name, rateLimit) {\n        this.id = 0;\n        this.limiterName = `${bridgeName.trim().length > 0 ? bridgeName : 'node-hue-api'}:${name}`;\n        this.bottleneck = new bottleneck_1.default(rateLimit || undefined);\n        HueApiRateLimitLogger_1.HueApiRateLimitLogger.install(name, this.bottleneck);\n    }\n    schedule(fn) {\n        const jobId = this.id++;\n        return this.bottleneck.schedule({ id: `${this.limiterName}:${jobId}` }, fn);\n    }\n}\nexports.HueRateLimiter = HueRateLimiter;\n"]},"metadata":{},"sourceType":"script"}