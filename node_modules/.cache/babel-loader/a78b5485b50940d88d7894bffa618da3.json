{"ast":null,"code":"\"use strict\";\n\nvar DLList, Events, Queues;\nDLList = require(\"./DLList\");\nEvents = require(\"./Events\");\nQueues = class Queues {\n  constructor(num_priorities) {\n    var i;\n    this.Events = new Events(this);\n    this._length = 0;\n\n    this._lists = function () {\n      var j, ref, results;\n      results = [];\n\n      for (i = j = 1, ref = num_priorities; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n        results.push(new DLList(() => {\n          return this.incr();\n        }, () => {\n          return this.decr();\n        }));\n      }\n\n      return results;\n    }.call(this);\n  }\n\n  incr() {\n    if (this._length++ === 0) {\n      return this.Events.trigger(\"leftzero\");\n    }\n  }\n\n  decr() {\n    if (--this._length === 0) {\n      return this.Events.trigger(\"zero\");\n    }\n  }\n\n  push(job) {\n    return this._lists[job.options.priority].push(job);\n  }\n\n  queued(priority) {\n    if (priority != null) {\n      return this._lists[priority].length;\n    } else {\n      return this._length;\n    }\n  }\n\n  shiftAll(fn) {\n    return this._lists.forEach(function (list) {\n      return list.forEachShift(fn);\n    });\n  }\n\n  getFirst() {\n    let arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._lists;\n    var j, len, list;\n\n    for (j = 0, len = arr.length; j < len; j++) {\n      list = arr[j];\n\n      if (list.length > 0) {\n        return list;\n      }\n    }\n\n    return [];\n  }\n\n  shiftLastFrom(priority) {\n    return this.getFirst(this._lists.slice(priority).reverse()).shift();\n  }\n\n};\nmodule.exports = Queues;","map":{"version":3,"sources":["/Users/clusk/Documents/OtherRepositories/StrikeElectric/node_modules/bottleneck/lib/Queues.js"],"names":["DLList","Events","Queues","require","constructor","num_priorities","i","_length","_lists","j","ref","results","push","incr","decr","call","trigger","job","options","priority","queued","length","shiftAll","fn","forEach","list","forEachShift","getFirst","arr","len","shiftLastFrom","slice","reverse","shift","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar DLList, Events, Queues;\nDLList = require(\"./DLList\");\nEvents = require(\"./Events\");\nQueues = class Queues {\n  constructor(num_priorities) {\n    var i;\n    this.Events = new Events(this);\n    this._length = 0;\n\n    this._lists = function () {\n      var j, ref, results;\n      results = [];\n\n      for (i = j = 1, ref = num_priorities; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n        results.push(new DLList(() => {\n          return this.incr();\n        }, () => {\n          return this.decr();\n        }));\n      }\n\n      return results;\n    }.call(this);\n  }\n\n  incr() {\n    if (this._length++ === 0) {\n      return this.Events.trigger(\"leftzero\");\n    }\n  }\n\n  decr() {\n    if (--this._length === 0) {\n      return this.Events.trigger(\"zero\");\n    }\n  }\n\n  push(job) {\n    return this._lists[job.options.priority].push(job);\n  }\n\n  queued(priority) {\n    if (priority != null) {\n      return this._lists[priority].length;\n    } else {\n      return this._length;\n    }\n  }\n\n  shiftAll(fn) {\n    return this._lists.forEach(function (list) {\n      return list.forEachShift(fn);\n    });\n  }\n\n  getFirst(arr = this._lists) {\n    var j, len, list;\n\n    for (j = 0, len = arr.length; j < len; j++) {\n      list = arr[j];\n\n      if (list.length > 0) {\n        return list;\n      }\n    }\n\n    return [];\n  }\n\n  shiftLastFrom(priority) {\n    return this.getFirst(this._lists.slice(priority).reverse()).shift();\n  }\n\n};\nmodule.exports = Queues;"]},"metadata":{},"sourceType":"script"}