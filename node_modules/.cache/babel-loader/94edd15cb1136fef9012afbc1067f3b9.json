{"ast":null,"code":"import { ObjectType, UInt8Type } from '../../types';\nimport { BridgeAction } from './BridgeAction';\nimport { Sensor } from '../sensors/Sensor';\nimport { HueBridgeModelError } from '../../HueBridgeModelError';\nconst ATTRIBUTES = [new UInt8Type({\n  name: 'sensor'\n}), new ObjectType({\n  name: 'body'\n}), new ObjectType({\n  name: 'state'\n})];\nexport class SensorStateAction extends BridgeAction {\n  constructor(sensor) {\n    super(ATTRIBUTES, 'PUT');\n    this.withSensor(sensor);\n  }\n\n  get address() {\n    return `/sensors/${this.sensor}/state`;\n  }\n\n  get sensor() {\n    return this.getAttributeValue('sensor');\n  }\n\n  withSensor(value) {\n    if (value instanceof Sensor) {\n      this.setAttributeValue('sensor', value.id);\n    } else {\n      this.setAttributeValue('sensor', value);\n    }\n  }\n\n  withState(value) {\n    // Sensor state varies wildly, so just take data here, maybe consider building payloads later on...\n    this.setAttributeValue('state', value);\n    return this;\n  }\n\n  get body() {\n    const state = this.getAttributeValue('state');\n\n    if (state) {\n      return state;\n    }\n\n    throw new HueBridgeModelError('No state has been set on the SensorStateAction');\n  }\n\n}","map":{"version":3,"sources":["/Users/clusk/Documents/OtherRepositories/StrikeElectric/node_modules/@peter-murray/hue-bridge-model/dist/esm/model/actions/SensorStateAction.js"],"names":["ObjectType","UInt8Type","BridgeAction","Sensor","HueBridgeModelError","ATTRIBUTES","name","SensorStateAction","constructor","sensor","withSensor","address","getAttributeValue","value","setAttributeValue","id","withState","body","state"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,SAArB,QAAsC,aAAtC;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,mBAAT,QAAoC,2BAApC;AACA,MAAMC,UAAU,GAAG,CACf,IAAIJ,SAAJ,CAAc;AAAEK,EAAAA,IAAI,EAAE;AAAR,CAAd,CADe,EAEf,IAAIN,UAAJ,CAAe;AAAEM,EAAAA,IAAI,EAAE;AAAR,CAAf,CAFe,EAGf,IAAIN,UAAJ,CAAe;AAAEM,EAAAA,IAAI,EAAE;AAAR,CAAf,CAHe,CAAnB;AAKA,OAAO,MAAMC,iBAAN,SAAgCL,YAAhC,CAA6C;AAChDM,EAAAA,WAAW,CAACC,MAAD,EAAS;AAChB,UAAMJ,UAAN,EAAkB,KAAlB;AACA,SAAKK,UAAL,CAAgBD,MAAhB;AACH;;AACU,MAAPE,OAAO,GAAG;AACV,WAAQ,YAAW,KAAKF,MAAO,QAA/B;AACH;;AACS,MAANA,MAAM,GAAG;AACT,WAAO,KAAKG,iBAAL,CAAuB,QAAvB,CAAP;AACH;;AACDF,EAAAA,UAAU,CAACG,KAAD,EAAQ;AACd,QAAIA,KAAK,YAAYV,MAArB,EAA6B;AACzB,WAAKW,iBAAL,CAAuB,QAAvB,EAAiCD,KAAK,CAACE,EAAvC;AACH,KAFD,MAGK;AACD,WAAKD,iBAAL,CAAuB,QAAvB,EAAiCD,KAAjC;AACH;AACJ;;AACDG,EAAAA,SAAS,CAACH,KAAD,EAAQ;AACb;AACA,SAAKC,iBAAL,CAAuB,OAAvB,EAAgCD,KAAhC;AACA,WAAO,IAAP;AACH;;AACO,MAAJI,IAAI,GAAG;AACP,UAAMC,KAAK,GAAG,KAAKN,iBAAL,CAAuB,OAAvB,CAAd;;AACA,QAAIM,KAAJ,EAAW;AACP,aAAOA,KAAP;AACH;;AACD,UAAM,IAAId,mBAAJ,CAAwB,gDAAxB,CAAN;AACH;;AA9B+C","sourcesContent":["import { ObjectType, UInt8Type } from '../../types';\nimport { BridgeAction } from './BridgeAction';\nimport { Sensor } from '../sensors/Sensor';\nimport { HueBridgeModelError } from '../../HueBridgeModelError';\nconst ATTRIBUTES = [\n    new UInt8Type({ name: 'sensor' }),\n    new ObjectType({ name: 'body' }),\n    new ObjectType({ name: 'state' }),\n];\nexport class SensorStateAction extends BridgeAction {\n    constructor(sensor) {\n        super(ATTRIBUTES, 'PUT');\n        this.withSensor(sensor);\n    }\n    get address() {\n        return `/sensors/${this.sensor}/state`;\n    }\n    get sensor() {\n        return this.getAttributeValue('sensor');\n    }\n    withSensor(value) {\n        if (value instanceof Sensor) {\n            this.setAttributeValue('sensor', value.id);\n        }\n        else {\n            this.setAttributeValue('sensor', value);\n        }\n    }\n    withState(value) {\n        // Sensor state varies wildly, so just take data here, maybe consider building payloads later on...\n        this.setAttributeValue('state', value);\n        return this;\n    }\n    get body() {\n        const state = this.getAttributeValue('state');\n        if (state) {\n            return state;\n        }\n        throw new HueBridgeModelError('No state has been set on the SensorStateAction');\n    }\n}\n"]},"metadata":{},"sourceType":"module"}